<!DOCTYPE html>
<html lang="zh-tw">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600;700&family=Noto+Serif+TC:wght@300;400;500;600;700;900&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;600;700;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="./style/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/8.4.5/swiper-bundle.css">
    <title>森鉅建設</title>
</head>

<body>
    <header>
        <div class="logoBox">
            <a href="./index.html">
                <img src="./img/index/svg/logo.svg" alt="logo">
            </a>

        </div>
        <div class="toolBox">
            <div class="user-area">
                <div class="user-area-button">
                    <img src="./img/config/user.svg">
                    <p>Name </p>
                    <img src="./img/config/header-arrow.svg" class="arrow">
                </div>

                <div class="user-area-menu">
                    <ul>
                        <li><a href="user.html">會員專區</a></li>
                        <li><a href="javascript:;">客服維修</a></li>
                    </ul>
                </div>
            </div>
            <div class="menu-button">
                <p>．</p>
                <p>Menu</p>
            </div>
        </div>

    </header>
    <div class="menu">
        <div class="close">
            <img src="./img/config/bx_x.svg" alt="x">
        </div>
        <ul>
            <li>

                關於森鉅
                <span>Sun Glory</span>

                <ul class="sub-open">
                    <li> <a href="./concept.html">
                            品牌理念
                            <span>Concept</span>
                        </a> </li>
                    <li> <a href="./company.html">
                            營造公司
                            <span>Company</span>
                        </a> </li>
                    <li><a href="./smart.html">
                            科技智慧宅
                            <span>Smart Home</span>
                        </a> </li>
                </ul>
            </li>
            <li>
                <a href="./constrction.html" class="sub">
                    熱銷建案
                    <span>Construction</span>
                </a>

            </li>
            <li>
                <a href="./portfolio.html" class="sub">
                    經典業績
                    <span>Portfolio</span>
                </a>

            </li>
            <li>
                <a href="./contact.html" class="sub">
                    聯絡我們
                    <span>Contact Us</span>
                </a>

            </li>
            <li>
                <a href="./login.html">
                    會員登入
                    <span>Log In</span>
                </a>

            </li>
        </ul>
    </div>
    <section class="progress">
        <section class="first-page">
            <div class="first-page-title">
                <h3>PROGRESS</h3>
                <h2>工程進度</h2>
            </div>
            <div class="first-page-bg">
                <img src="./img/progress/first-page-bg.webp">
            </div>
            <div class="caseName">
                <h2>之間</h2>
            </div>
        </section>
        <main>
            <div class="content">
                <div class="title">
                    <p><span>10月</span>大底灌漿</p>
                </div>
                <div class="content-left">
                    <div class="swiper swiper1 swiper-no-swiping">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide">
                                <div class="imgBox">
                                    <img src="./img/progress/slide1.webp">
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="imgBox">
                                    <img src="./img/progress/slide2.webp">
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="imgBox">
                                    <img src="./img/progress/slide3.webp">
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="imgBox">
                                    <img src="./img/progress/slide4.webp">
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="imgBox">
                                    <img src="./img/progress/slide5.webp">
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="imgBox">
                                    <img src="./img/progress/slide6.webp">
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="imgBox">
                                    <img src="./img/progress/slide4.webp">
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="imgBox">
                                    <img src="./img/progress/slide5.webp">
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="imgBox">
                                    <img src="./img/progress/slide6.webp">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="content-right">
                    <img src="./img/progress/slide1.webp" class="is-active">
                    <img src="./img/progress/slide2.webp">
                    <img src="./img/progress/slide3.webp">
                    <img src="./img/progress/slide4.webp">
                    <img src="./img/progress/slide5.webp">
                    <img src="./img/progress/slide6.webp">
                    <img src="./img/progress/slide4.webp">
                    <img src="./img/progress/slide5.webp">
                    <img src="./img/progress/slide6.webp">
                    <img src="./img/progress/slide6.webp">
                    <div class="more">
                        <p>更多</p>
                    </div>
                </div>
            </div>
            <div class="content">
                <div class="title">
                    <p><span>9月</span>鋼筋綁紮</p>
                </div>
                <div class="content-left">
                    <div class="swiper swiper1 swiper-no-swiping">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide">
                                <div class="imgBox">
                                    <img src="./img/progress/slide1.webp">
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="imgBox">
                                    <img src="./img/progress/slide2.webp">
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="imgBox">
                                    <img src="./img/progress/slide3.webp">
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="imgBox">
                                    <img src="./img/progress/slide4.webp">
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="imgBox">
                                    <img src="./img/progress/slide5.webp">
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="imgBox">
                                    <img src="./img/progress/slide6.webp">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="content-right">
                    <img src="./img/progress/slide1.webp" class="is-active">
                    <img src="./img/progress/slide2.webp">
                    <img src="./img/progress/slide3.webp">
                    <img src="./img/progress/slide4.webp">
                    <img src="./img/progress/slide5.webp">
                    <img src="./img/progress/slide6.webp">
                    <div class="more">
                        <p>更多</p>
                    </div>
                </div>
            </div>
            <div class="content">
                <div class="title">
                    <p><span>8月</span>第二層出土完成</p>
                </div>
                <div class="content-left">
                    <div class="swiper swiper1 swiper-no-swiping">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide">
                                <div class="imgBox">
                                    <img src="./img/progress/slide1.webp">
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="imgBox">
                                    <img src="./img/progress/slide2.webp">
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="imgBox">
                                    <img src="./img/progress/slide3.webp">
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="imgBox">
                                    <img src="./img/progress/slide4.webp">
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="imgBox">
                                    <img src="./img/progress/slide5.webp">
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="imgBox">
                                    <img src="./img/progress/slide6.webp">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="content-right">
                    <img src="./img/progress/slide1.webp" class="is-active">
                    <img src="./img/progress/slide2.webp">
                    <img src="./img/progress/slide3.webp">
                    <img src="./img/progress/slide4.webp">
                    <img src="./img/progress/slide5.webp">
                    <img src="./img/progress/slide6.webp">
                    <div class="more">
                        <p>更多</p>
                    </div>
                </div>
            </div>
            <div class="pop-up">
                <div class="pop-up-close">
                    <img src="./img/config/bx_x.svg" alt="x">
                </div>
                <div class="pop-up-content">
                    <div class="title">
                    </div>
                    <div class="pop-up-content-top">
                        <div class="swiper swiper swiper-no-swiping">
                            <div class="swiper-wrapper">

                            </div>
                        </div>
                    </div>
                    <div class="pop-up-content-bottom">
                    </div>
                </div>
            </div>
        </main>
    </section>

    <footer>
        <p class="computer">Copyright © 2023 森鉅建設股份有限公司版權所有<span>TEL：12345678</span>地址：臺北市松山區敦化北路167號17樓</p>
        <p class="phone">森鉅建設股份有限公司版權所有 2023 © Copyright<br>
            02-12345678 臺北市松山區敦化北路167號17樓</p>
    </footer>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/8.4.5/swiper-bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
    <script src="./js/config.js"></script>

    <script>

        window.onload = function () {

            popUpImg()


            const swiper1 = new Swiper(".content .swiper1", {
                effect: 'fade',
                fadeEffect: {
                    crossFade: true,
                },

                speed: 1000,
            })
            const swiper2 = new Swiper(".pop-up .swiper", {
                effect: 'fade',
                fadeEffect: {
                    crossFade: true,
                },

                speed: 1000,
            })
            //點小圖換輪播圖

            function thumbs() {

                $(".content-right").each((i, item) => {
                    $(item.children).each((j, item) => {
                        $(item).click(function (e) {
                            if ((item.nodeName).toUpperCase() == "IMG") {
                                swiper1[i].slideTo(j)
                                $(item).parent().find("img").removeClass("is-active")
                                $(item).addClass("is-active")
                            }

                        })
                    })
                })


            }
            thumbs()


            function more() {


                //當圖片超過九個時顯示'更多'按鈕
                $(".content-right").each((i, item) => {
                    if (item.childElementCount >= 11) {
                        $(item).addClass("more-active")
                    }
                })



                //pop up 

                $(".content .more").click((e) => {
                    //視窗開啟
                    $(".pop-up").addClass("pop-up-active")
                    //視窗開啟時 禁用body的滾動
                    $("body").addClass("body-noscroll")


                })


                $(".pop-up-close").click(() => {
                    //視窗關閉
                    $(".pop-up").removeClass("pop-up-active")
                    //視窗關閉時 開啟body的滾動
                    $("body").removeClass("body-noscroll");

                })
            }
            more()



            //視窗開啟時，抓取當月進度欄位的圖片(包含輪播圖、小圖及title)塞入pop up視窗
            function popUpImg() {
                //pop up part
                let insert = new Promise((resolve, reject) => {
                    $(".content .more").each((i, item) => {
                        $(item).click((e) => {

                            //輪播圖抓取
                            let slide = [];
                            $($(".content")[i]).find(".swiper-slide").children().each((j, item) => {
                                slide.push(`<div class="swiper-slide">${$($(item))[0].outerHTML}</div>`)
                            })

                            for (let j = 0; j < $($(".content")[i]).find(".swiper-slide").length; j++) {


                                $(".pop-up .swiper-wrapper").append(slide[j])
                            }
                            //小圖抓取
                            let slide2 = []
                            $($(".content")[i]).find(".content-right img").each((j, item) => {

                                slide2.push(`${$($(item))[0].outerHTML}`)

                            })

                            for (let j = 0; j < $($(".content")[i]).find(".content-right img").length; j++) {
                                $(slide2[0]).addClass("is-active")
                                $(".pop-up-content-bottom").append(slide2[j])

                            }

                            //title 抓取
                            console.log($($($(".content")[i]).find(".title")[0]).children().html())
                            $(".pop-up .title").append(`${$($($(".content")[i]).find(".title")[0]).html()}`)



                            resolve()
                        })
                    })
                }).then(() => {
                    $(".pop-up-content-bottom img").each((i, item) => {

                        // $(item).on("click", function (e) {
                        //     console.log(e)
                        //     if ((item.nodeName).toUpperCase() == "IMG") {
                        //         swiper2.slideTo(i)
                        //         $(item).parent().find("img").removeClass("is-active")
                        //         $(item).addClass("is-active")
                        //     }
                        // })
                        $(".pop-up-content-bottom").on("click", (e) => {

                            if (e.target == $($(".pop-up-content-bottom img")[i])[0]) {
                                swiper2.slideTo(i)
                                $($($(".pop-up-content-bottom img")[i])[0]).addClass("is-active").parent().find("img").removeClass("is-active")
                                $($($(".pop-up-content-bottom img")[i])[0]).addClass("is-active")
                            }

                        })
                    })
                })

                //關閉視窗時清除圖片內容
                $(".pop-up-close").click(() => {
                    setTimeout(() => {
                        $(".pop-up .swiper-wrapper").empty()
                        $(".pop-up-content-bottom").empty()
                        $(".pop-up .title").empty()
                    }, 450)

                })
            }

        }
    </script>
</body>

</html>